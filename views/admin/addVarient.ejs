<%- include('../layout/admin/layout') %>
<%- include('../partials/admin-header-checking') %>

<div class="container-fluid">
    <div class="row  border-start">
        <main class="px-md-4 icons " style="margin-left: 18%;width: 80%; margin-top: 6%;">
            <div class="row d-flex justify-content-between">
                <div class="col-md-8">
                    <h1 class="mt-5" style="color: white;">Edit Product</h1>
                    <br>
                    <form action="/admin/addVarient/<%= product._id %>" method="post" enctype="multipart/form-data" class="bg-white">
                        <div class="form-group">
                            <label for="productName">Product Name:</label>
                            <input
                                type="text"
                                value="<%=product.ProductName%>"
                                name="ProductName"
                                class="form-control bg-light"
                                id="productName"
                                placeholder="Enter product name"
                                required
                            />
                        </div><br>

                        <div class="form-group">
                            <label for="productDescription text-dark">Product Description:</label>
                            <input
                                type="text"
                                value="<%=product.Description%>"
                                class="form-control bg-light"
                                name="Description"
                                id="productDescription"
                                rows="4"
                                placeholder="Enter product description"
                                required
                            >
                        </div>
                        <br >
                        <div class="form-group">
                            <label for="productSpecification">Product Specification:</label>
                            <input
                                type="text"
                                value="<%=product.Specification1%>"
                                class="form-control bg-light"
                                name="Specification1"
                                id="productSpecification1"
                                placeholder="Enter product Specification"
                                required
                            ><br>
                            <label for="productSpecification2">Product Specification:</label>
                            <input
                                type="text"
                                value="<%=product.Specification2%>"
                                class="form-control bg-light"
                                name="Specification2"
                                id="productSpecification"
                                placeholder="Enter product Specification"
                                required
                            ><br>
                            <label for="productSpecification3">Product Specification:</label>
                            <input
                                type="text"
                                value="<%=product.Specification3%>"
                                class="form-control bg-light"
                                name="Specification3"
                                id="productSpecification"
                                placeholder="Enter product Specification"
                                required
                            ><br>
                            <label for="productSpecification4">Product Specification:</label>
                            <input
                                type="text"
                                value="<%=product.Specification4%>"
                                class="form-control bg-light"
                                name="Specification4"
                                id="productSpecification"
                                placeholder="Enter product Specification"
                                required
                            >
                        </div>
                        <br>

                        <div class="border p-3 mb-3 bg-light "> <!-- Added bg-light and text-center classes -->
                            <h3>Media</h3>
                            <div class="form-group text-center ">
                                <label for="productImage">Drag and drop or click to upload an image:</label>
                                <br><br><br><br>
                                <input
                                    type="file"
                                    name="images"
                                    class="form-control-file"
                                    id="productImage"
                                    accept="image/*"
                                    multiple
                                    style="display: none;"
                                    required
                                />
                            </div>
                            <!-- uploaded images -->
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="uploaded-image">
                                        <img src="" alt="Uploaded Image 1" id="uploadedImage1" class="img-fluid" data-index="1">
                                        <button class="btn btn-danger btn-sm delete-image" style="display: none;" data-index="1">Delete</button>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="uploaded-image">
                                        <img src="" alt="Uploaded Image 2" id="uploadedImage2" class="img-fluid" data-index="2">
                                        <button class="btn btn-danger btn-sm delete-image" style="display: none;" data-index="2">Delete</button>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="uploaded-image">
                                        <img src="" alt="Uploaded Image 3" id="uploadedImage3" class="img-fluid" data-index="3">
                                        <button class="btn btn-danger btn-sm delete-image" style="display: none;" data-index="3">Delete</button>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <div class="border p-3 mb-3">
                            <h2>Pricing</h2>
                            <div class="form-group">
                                <label for="basePrice">Base Price:</label>
                                <input
                                    value="<%=product.Price%>"
                                    type="number"
                                    name="Price"
                                    class="form-control bg-light"
                                    id="basePrice"
                                    placeholder="Enter base price"
                                    required
                                />
                            </div>
                            <br>
                            <div class="form-group">
                                <label for="discountAmount">Discount Amount:</label>
                                <input
                                    value="<%=product.DiscountAmount%>"
                                    type="number"
                                    name="DiscountAmount"
                                    class="form-control bg-light"
                                    id="discountAmount"
                                    placeholder="Enter discount amount"
                                    required
                                />
                            </div>
                        </div>


                        <div class="border p-3 mb-3">
                            <h2>Variations</h2>
                            <div>
                                <input type="radio" name="productType" id="watchesRadio" value="Tyre"> Tyre
                                <input type="radio" name="productType" id="perfumesRadio" value="Oil"> Oils
                            </div>
                            <div id="watchColorInput" style="display: none;">
                                <label for="watchColors">Enter Tyre size:</label>
                                <input type="text"  name="Tyre" id="watchColors">
                            </div>
                            <div id="perfumeQuantityDropdown" style="display: none;">
                                <label for="perfumeQuantity">Select The Size:</label>
                                <select id="perfumeQuantity" name="Oil">
                                    <option value="50 ML">1L</option>
                                    <option value="100 ML">1.2L</option>
                                    <option value="150 ML">1.5L</option>
                                    <!-- Add more options as needed -->
                                </select>
                            </div>
                        </div>



                        <div class="border p-3 mb-3">
                            <h2>Stock</h2>
                            
                            <div class="form-group">
                                <label for="quantity">Quantity:</label>
                                <input
                                    type="number"
                                    value="<%= product.AvailableQuantity %>"
                                    name="AvailableQuantity"
                                    class="form-control bg-light"
                                    id="quantity"
                                    placeholder="Enter quantity"
                                    required
                                />
                            </div>
                        </div>

                    
                </div>

                <div class="col-md-4 my-5">
                    <div class="bg-white p-3">
                        <div class="form-group">
                            <br>
                            <label for="category">Category:</label>
                            <select class="form-select bg-light" id="category" name="Category" required>
                                <!-- <option value="" selected disabled>Select a category</option> -->
                                <option value="Lubricants" <%= product.Category ==="Lubricants" ? 'selected' : "" %> >Lubricants</option>
                                <option value="Tyres"<%= product.Category ==="Tyres" ? 'selected' : "" %> >Tyres</option>
                                <option value="Paints"<%= product.Category ==="Paints" ? 'selected' : "" %> >Paints</option>
                                <option value="Brakes"<%= product.Category ==="Brakes" ? 'selected' : "" %> >Brakes</option>
                                <option value="Headlights"<%= product.Category ==="Headlights" ? 'selected' : "" %> >Headlights</option>
                            </select>
                        </div><br>
                        <div class="form-group">
                            <br>
                            <label for="brandName">Brand Name:</label>
                            <select name="BrandName" class="form-select bg-light" id="brand" required>
                                <!-- <option value="" selected disabled>Select a Brand</option> -->
                                <option value="MRF"<%= product.Category ==="MRF" ? 'selected' : "" %>>MRF</option>
                                <option value="CEAT"<%= product.Category ==="CEAT" ? 'selected' : "" %>>CEAT</option>
                                <option value="3m"<%= product.Category ==="3m" ? 'selected' : "" %>>3M</option>
                                <option value="CarCare "<%= product.Category ==="CarCare" ? 'selected' : "" %>>CarCare</option>

                            </select>
                        </div><br>
                        <div class="form-group">
                            <label for="tags">Tags:</label>
                            <input
                                type="text"
                                class="form-control bg-light"
                                name="Tags",
                                value='<%= product.Tags %>'
                                id="tags"
                                placeholder="Enter tags"
                                required
                            />
                        </div>
                  
                    </div>
                    <button type="submit" class="btn btn-primary ms-3">Edit Product</button>
                </div>
                </form>
            </div>
        </main>
    </div>
</div>
</body>
<script>
    function previewImage(inputId, previewId) {
        const input = document.getElementById(inputId);
        const preview = document.getElementById(previewId);

        const file = input.files[0];
        const existingImage = preview.getAttribute("data-existing-image");

        if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                preview.src = e.target.result;
            };
            reader.readAsDataURL(file);
        } else if (existingImage) {
            // If no file is selected, and there's an existing image, use the existing value
            preview.src = "/uploads/" + existingImage;
        } else {
            // If no file is selected and no existing image, set the preview to a placeholder or default image
            preview.alt = "No image is available";
        }
    }
</script>

</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/js/script.js"></script>

</html>